---
layout: post
title: git本地多个ssh-key的问题
category: project
description: 本地配置了两个ssh-key，一个用来连接公司server，一个用来连接github，分别用的不同的用户名和邮箱地址，默认的配置情况下肯定会出现permission denied的错误...
---

##关于git的ssh-key:解决本地多个ssh-key的问题
1、首先尝试重新添加以前生成的key，添加多次，仍然不起作用。

2、使用命令 ssh -v git@github.com测试（或是ssh -T github），最后几行显示结果如下：

```
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/gr/.ssh/id_rsa
debug1: Trying private key: /home/gr/.ssh/id_dsa
debug1: Trying private key: /home/gr/.ssh/id_ecdsa
debug1: No more authentication methods to try.
Permission denied (publickey).
```

3、分析：尝试了3个private key，但都没有成功，最后是导致Permission denied。

4、在github里添加新生成的key。

5、**需要配置一下访问不同地址的用户**

	~/.ssh$ sudo vi ~/.ssh/config
	
6、将类似以下内容复制进去保存

	host github 
	user git 
	hostname github.com 
	port 22 
	identityfile ~/.ssh/github
	
7、测试：

	~/.ssh$ ssh -T github
	
8、链接成功的会提示：

	You've successfully authenticated, 
	but GitHub does not provide shell access.

**注解:**

1、本地的config文件配置事例：

```
host github
user git
hostname github.com
port 22
identityfile ~/.ssh/github
host bitbucket
user git
hostname bitbucket.org
port 22
identityfile ~/.ssh/bitbucket
```

2、一般情况下，都会配置全局的git的username等，

```
git config --global user.name [username]
git config --global user.email [email]
```

在邮箱不同的情况下，需要配置局部的username：

```
git config user.name [username]
git config user.email [email]
```

可以使用
```
git config -l
```
来查看本地git的配置情况，若要查看局部的username，需要进入对应的文件夹使用该命令。

##Github 访问时出现Permission denied (public key)
1、首先尝试重新添加以前生成的key，添加多次，仍然不起作用。

2、使用命令 ssh -v git@github.com测试（或是ssh -T github），最后几行显示结果如下：

```
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/gr/.ssh/id_rsa
debug1: Trying private key: /home/gr/.ssh/id_dsa
debug1: Trying private key: /home/gr/.ssh/id_ecdsa
debug1: No more authentication methods to try.
Permission denied (publickey).
```

3、分析：尝试了3个private key，但都没有成功，最后是导致Permission denied。

4、查看我的密钥，*ls ~/.ssh/*，会显示出密钥文件，如下

	bitbucket     config        github.pub    id_rsa.pub
	bitbucket.pub github        id_rsa        known_hosts

5、使用*ssh-add -l*查看密钥列表

	2048 ea:4e:30:d5:60:9e:5e:c7:08:94:c8:a3:bf:53:3c:5b 
	/Users/home/.ssh/id_rsa (RSA)

6、发现此处只有一个RSA文件。使用命令将git的RSA添加进去。

	ssh-add ~/.ssh/github
	
7、再次查看，如下，添加成功：

	2048 ea:4e:30:d5:60:9e:5e:c7:08:94:c8:a3:bf:53:3c:5b 
	/Users/home/.ssh/id_rsa (RSA)
	2048 f2:2b:2d:9c:70:73:94:1d:c7:95:db:d9:09:2e:dc:2a 
	/Users/home/.ssh/github (RSA)

8、再使用ssh -v git@github.com测试连接，可以看到验证通过：

```
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/gr/.ssh/bajie
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
Authenticated to github.com
```
9、可以使用clone、push等操作。

##蔓延的简单
大概是工作的关系，渐渐追求简单的思维蔓延到了生活中，甚至到了本没有标准的艺术范畴。来看下图：

![Focus Inside](http://img1.bitautoimg.com/autoalbum/files/20120319/123/23575912395576_1844692_7.jpg)

搭朋友的车，这中控系统功能确实强大，但是不得不说这界面的设计师，还活在上个世纪，早该被解雇了。只因这不是选车最值得考虑的部分，不然朋友肯定会选择更好的。

甚至到了没有标准的艺术范畴，简单都成了标准：

![My Photo](http://ww3.sinaimg.cn/large/a74eed94jw1e0mmo1xa2kj.jpg)

也不知是否因为我看娱乐节目太多，导致智商降低，对于文学、电影作品，甚至都不能接受故弄玄虚，我不愿去想，也不愿去猜。比如[《一代宗师》][2]故事支离破碎，台词游离，就连王家卫最拿手的气氛渲染，也比[《花样年华》][3]差远了。复杂了，失焦了，我也没有耐心去思索。

![The Grandmasters](http://ww4.sinaimg.cn/bmiddle/62275834jw1e0mlp67dv4j.jpg)

##简单的背后
做加法很容易，把所见所想全写上就好，做到简单却要经过谨慎的思考。

简单的背后不应该是简陋。对比[豆瓣FM][4]和[虾米FM][5]就能理解，豆瓣FM简陋的背后带来了无尽的不安全感，无法控制的挫败感，纵然你能满足大部分用户，但也绝不应该放弃更苛刻的用户，因为作为创造者，你自己也是那些苛求的需要者。

当然，我知道豆瓣FM有他的苦衷，只是举个例子，做减法并不是舍弃，而是合理的隐藏。

![The Next Day](http://ww1.sinaimg.cn/large/a74ecc4cjw1e0mnhp3ijtj.jpg)

[Next Day][6]就是这样，简单美妙，但是当你想要更多的时候，控制权也完全交到你手中，并且很高效。

##TL;DR
错过这篇废话而无用的文章，你是赚到啦！




[BeiYuu]:    http://beiyuu.com  "BeiYuu"
[1]:    {{ page.url}}  ({{ page.title }})
[2]: http://movie.douban.com/subject/3821067/
[3]: http://movie.douban.com/subject/1291557/
[4]: http://douban.fm/
[5]: http://xiami.fm/
[6]: https://itunes.apple.com/us/app/next-day/id491352621?mt=8
[chasuqi]: http://v.youku.com/v_show/id_XNDkwMTg0MDI0.html
